(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/damageTesting"],{"174e":function(e,t,n){"use strict";n.r(t);var i=n("de37"),u=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=u.a},3383:function(e,t,n){"use strict";(function(e){n("2588");i(n("66fd"));var t=i(n("f86d"));function i(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"38ae":function(e,t,n){},6877:function(e,t,n){"use strict";var i=n("38ae"),u=n.n(i);u.a},7670:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={uRow:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-row/u-row")]).then(n.bind(null,"1542"))},uCol:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-col/u-col")]).then(n.bind(null,"b870"))},"u-Text":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--text/u--text")]).then(n.bind(null,"387e"))},"u-Input":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--input/u--input")]).then(n.bind(null,"7221"))},uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"c882"))},uniDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(n.bind(null,"a81a"))},uniDataSelect:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-data-select/components/uni-data-select/uni-data-select")]).then(n.bind(null,"da50"))},uniTable:function(){return n.e("uni_modules/uni-table/components/uni-table/uni-table").then(n.bind(null,"8e4d"))},uniTr:function(){return n.e("uni_modules/uni-table/components/uni-tr/uni-tr").then(n.bind(null,"346d"))},uniTh:function(){return n.e("uni_modules/uni-table/components/uni-th/uni-th").then(n.bind(null,"a314"))},uniTd:function(){return n.e("uni_modules/uni-table/components/uni-td/uni-td").then(n.bind(null,"f768"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"0ca62"))},uToast:function(){return n.e("uni_modules/uview-ui/components/u-toast/u-toast").then(n.bind(null,"dd99"))}},u=function(){var e=this,t=e.$createElement;e._self._c},o=[]},de37:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=u(n("c3d9"));function u(e){return e&&e.__esModule?e:{default:e}}var o={data:function(){return{codeNumber:"",qualityInspector:"26314",SOU:"SOU123456789",damageNum:0,inspectionTime:"",selectAngecy:0,tableData:[],receiveData:{}}},mounted:function(){this.qualityInspector="当前用户";var e=new Date,t=e.toLocaleDateString().split("/").join("-");this.inspectionTime=t,console.log("********************angecy",angecy)},methods:{startSearch:function(){this.getBasicMessage()},startScan:function(){var t=this;e.scanCode({success:function(e){"scanCode:ok"==e.errMsg?t.$nextTick((function(){t.codeNumber=e.result})):this.$refs.uToast.error("扫码失败，请重试")}})},commit:function(){var t=this;this.$refs.uToast.success("commit");var n={url:"/spotcheck/updateInspectData",method:"post"};if(""!==this.inspectionTime&&void 0!==this.inspectionTime)if(this.tableData.length<this.damageNum)this.$refs.uToast.error("提交量必须与有损件数一致");else{var u=this;this.tableData.forEach((function(e,t){e["itemCode"]=t,e["checkEndDate"]=u.inspectionTime,e["checkType"]=u.selectAngecy,e["spotCheckCode"]=u.receiveData.spotCheckCode})),this.receiveData.details=this.tableData,this.receiveData.inspectDate=this.inspectionTime,this.receiveData.inspectBy=this.qualityInspector,this.receiveData.inspectOrgan=this.selectAngecy;var o=this.receiveData;e.showLoading({title:"加载中..."}),i.default.httpRequest(n,o).then((function(n){console.log("*******response:",n),e.hideLoading(),"200"===n.data.code?t.$refs.uToast.success("提交成功"):t.$refs.uToast.error("提交失败")}))}else this.$refs.uToast.error("请选择送检时间并重试")},changeAngecy:function(e){this.selectAngecy=e},changeDate:function(e){this.inspectionTime=e,console.log("change date :",this.inspectionTime)},add:function(){this.tableData.length>=parseInt(this.damageNum)?this.$refs.uToast.success("数量已达上限"):this.tableData.push({checkWeight:""})},del:function(e){this.tableData.splice(e,1)},getBasicMessage:function(){var t=this,n={url:"/spotcheck/querySpotCheckByCode?barCode=".concat(this.codeNumber),method:"get"};e.showLoading({title:"加载中..."}),i.default.httpRequest(n,null).then((function(n){e.hideLoading(),"200"===n.data.code?(t.receiveData=n.data.data,t.SOU="SOU",t.damageNum=n.data.data.checkNumber,t.tableData=n.data.data.details):t.$refs.uToast.error("获取数据失败，请重试")}))}}};t.default=o}).call(this,n("543d")["default"])},f86d:function(e,t,n){"use strict";n.r(t);var i=n("7670"),u=n("174e");for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);n("6877");var a,s=n("f0c5"),c=Object(s["a"])(u["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);t["default"]=c.exports}},[["3383","common/runtime","common/vendor"]]]);