{"version":3,"sources":["webpack:////Users/taixin.jiang/Desktop/UNIAPP/CB_PDA/CBPDA/components/c-table/c-table.vue?49d0","webpack:////Users/taixin.jiang/Desktop/UNIAPP/CB_PDA/CBPDA/components/c-table/c-table.vue?e3cb","webpack:////Users/taixin.jiang/Desktop/UNIAPP/CB_PDA/CBPDA/components/c-table/c-table.vue?d385","webpack:////Users/taixin.jiang/Desktop/UNIAPP/CB_PDA/CBPDA/components/c-table/c-table.vue?f459","uni-app:///components/c-table/c-table.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4T;AAC5T;AAC2D;AACL;;;AAGtD;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,0RAAM;AACR,EAAE,mSAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,8RAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAo1B,CAAgB,qyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;ACOx2B;;;;;AAKA;AACA;AACA;AACA,GADA;AAEA;;AAEA;AACA;AACA;AACA,GAHA,MAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;AACA;AACA;AACA;AACA,kBADA;AAEA,wBAFA,EADA,EADA;;;AAOA;AACA,aADA,uBACA;AACA;AACA;AACA,KAJA,EAPA;;AAaA,SAbA,qBAaA;AACA;AACA;AACA;AACA;AACA;AACA,KAJA;AAKA,GApBA;AAqBA,MArBA,kBAqBA;AACA;AACA;AACA,wBADA;AAEA,0BAFA;AAGA,8BAHA;AAIA,+BAJA,EADA;;AAOA,0BAPA,EAOA;AACA,yBARA;AASA,kCATA,CASA;AATA;AAWA,GAjCA;AAkCA;;AAEA;;;;;AAKA,iBAPA,yBAOA,KAPA,EAOA,OAPA,EAOA;AACA;AACA,mBADA;AAEA,oBAFA;AAGA,+CAHA;;AAKA,KAbA;AAcA;;;;;AAKA,eAnBA,uBAmBA,WAnBA,EAmBA,YAnBA,EAmBA;AACA;AACA;AACA;AACA,gCADA;AAEA,kCAFA;AAGA,gBAHA;;AAKA;AACA;AACA,OAFA;AAGA,KA9BA;AA+BA;;;;AAIA,uBAnCA,+BAmCA,OAnCA,EAmCA,GAnCA,EAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA,OARA,EAQA,CARA;AASA,KA9CA;AA+CA;;;;AAIA,uBAnDA,+BAmDA,KAnDA,EAmDA;AACA;AACA;AACA;AACA,KAvDA;AAwDA;;;;AAIA,eA5DA,uBA4DA,KA5DA,EA4DA;AACA;AACA,KA9DA;AA+DA;AACA,cAhEA,sBAgEA,KAhEA,EAgEA;AACA;AACA,KAlEA,EAlCA,E","file":"components/c-table/c-table.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./c-table.vue?vue&type=template&id=03c96bce&scoped=true&filter-modules=eyJ2eGVUYWJsZU1vZHVsZSI6eyJ0eXBlIjoicmVuZGVyanMiLCJjb250ZW50IjoiIiwic3RhcnQiOjMzNTEsImF0dHJzIjp7Im1vZHVsZSI6InZ4ZVRhYmxlTW9kdWxlIiwibGFuZyI6ImpzIn0sImVuZCI6MTE5ODN9fQ%3D%3D&\"\nvar renderjs\nimport script from \"./c-table.vue?vue&type=script&lang=js&\"\nexport * from \"./c-table.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"03c96bce\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/c-table/c-table.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./c-table.vue?vue&type=template&id=03c96bce&scoped=true&filter-modules=eyJ2eGVUYWJsZU1vZHVsZSI6eyJ0eXBlIjoicmVuZGVyanMiLCJjb250ZW50IjoiIiwic3RhcnQiOjMzNTEsImF0dHJzIjp7Im1vZHVsZSI6InZ4ZVRhYmxlTW9kdWxlIiwibGFuZyI6ImpzIn0sImVuZCI6MTE5ODN9fQ%3D%3D&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./c-table.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./c-table.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- vxe-table将被渲染在这里 -->\r\n\t<view :id=\"id\" :data=\"data\" :change:data=\"vxeTableModule.updateData\">\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t/**\r\n\t * 获取主键\r\n\t * @param {Object} len 生成主键的长度\r\n\t * @param {Object} radix 基数\r\n\t */\r\n\tfunction $getKey(len, radix) {\r\n\t\tlet chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\r\n\t\tlet uuid = [],\r\n\t\t\ti;\r\n\t\tradix = radix || chars.length;\r\n\r\n\t\tif (len) {\r\n\t\t\t// Compact form\r\n\t\t\tfor (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];\r\n\t\t} else {\r\n\t\t\t// rfc4122, version 4 form\r\n\t\t\tlet r;\r\n\r\n\t\t\t// rfc4122 requires these characters\r\n\t\t\tuuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\r\n\t\t\tuuid[14] = '4';\r\n\r\n\t\t\t// Fill in random data.  At i==19 set the high bits of clock sequence as\r\n\t\t\t// per rfc4122, sec. 4.1.5\r\n\t\t\tfor (i = 0; i < 32; i++) {\r\n\t\t\t\tif (!uuid[i]) {\r\n\t\t\t\t\tr = 0 | Math.random() * 16;\r\n\t\t\t\t\tuuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn uuid.join('');\r\n\t}\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tinitTable: { //初始化表格数据对象\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: undefined\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tinitTable() {\r\n\t\t\t\tif (!this.initTable) return\r\n\t\t\t\tthis.setTableProps(this.initTable, \"init\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t//初始化表格\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tif (!this.initTable) return\r\n\t\t\t\tthis.setTableProps(this.initTable, \"init\")\r\n\t\t\t\tthis.$nextTick(() => this.$emit(\"initComplete\"))\r\n\t\t\t})\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tprops: undefined,\r\n\t\t\t\t\tsetType: undefined,\r\n\t\t\t\t\tmethodsName: undefined,\r\n\t\t\t\t\tmethodsParam: undefined\r\n\t\t\t\t},\r\n\t\t\t\tid: \"id\" + $getKey(), //每次创建组件重新生成id，达到可以在一个页面显示多个表格\r\n\t\t\t\ttableRef: undefined,\r\n\t\t\t\texecutionCompleteMethods: {} //执行完成的方法对象和值，用来给Promise进行验证时使用\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t\t/**\r\n\t\t\t * 修改组件属性\r\n\t\t\t * @param {Object} props 组件props参数\r\n\t\t\t * @param {String} setType 修改类型\r\n\t\t\t */\r\n\t\t\tsetTableProps(props, setType) {\r\n\t\t\t\tthis.data = {\r\n\t\t\t\t\tid: this.id,\r\n\t\t\t\t\tprops,\r\n\t\t\t\t\tsetType: setType ? setType : \"setProps\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 调用组件方法\r\n\t\t\t * @param {String} methodsName 方法名称\r\n\t\t\t * @param {Object} methodsParam 方法参数\r\n\t\t\t */\r\n\t\t\tcallMethods(methodsName, methodsParam) {\r\n\t\t\t\t//生成临时主键用来给Promise进行验证时使用\r\n\t\t\t\tlet key = $getKey();\r\n\t\t\t\tthis.data = {\r\n\t\t\t\t\tmethodsName,\r\n\t\t\t\t\tmethodsParam,\r\n\t\t\t\t\tkey\r\n\t\t\t\t}\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tthis.verificationMethods(resolve, key);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * @param {Object} resolve 方法执行成功回调函数\r\n\t\t\t * @param {String} key 方法执行的临时key\r\n\t\t\t */\r\n\t\t\tverificationMethods(resolve, key) {\r\n\t\t\t\t//轮询验证\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif (key in this.executionCompleteMethods) {\r\n\t\t\t\t\t\tresolve(this.executionCompleteMethods[key]);\r\n\t\t\t\t\t\t//释放内存\r\n\t\t\t\t\t\tdelete this.executionCompleteMethods[key];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.verificationMethods(resolve, key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1);\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 调用组件方法的回调函数\r\n\t\t\t * @param {Object} param\r\n\t\t\t */\r\n\t\t\tcallMethodsCallback(param) {\r\n\t\t\t\t//添加完成方法以及值\r\n\t\t\t\tthis.executionCompleteMethods[param.key] = param.methodsParam;\r\n\t\t\t\tthis.$emit(\"callMethods\", param)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 表格事件\r\n\t\t\t * @param {Object} param 事件参数\r\n\t\t\t */\r\n\t\t\ttableEvents(param) {\r\n\t\t\t\tthis.$emit(\"tableEvents\", param)\r\n\t\t\t},\r\n\t\t\t//表格插槽事件\r\n\t\t\tslotEvents(param) {\r\n\t\t\t\tthis.$emit(\"slotEvents\", param)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<script module=\"vxeTableModule\" lang=\"renderjs\">\r\n\tmodule.exports = {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvm: null, //vue实例\r\n\t\t\t\tid_r: undefined, //每次创建组件重新生成id，达到可以在一个页面显示多个表格\r\n\t\t\t\ttableProps: { //表格所有参数\r\n\t\t\t\t\ttablePropsObj: {\r\n\t\t\t\t\t\tsize: \" small\",\r\n\t\t\t\t\t\tborder: \"default\",\r\n\t\t\t\t\t\talign: \"center\",\r\n\t\t\t\t\t\theaderAlign: \"center\",\r\n\t\t\t\t\t\theight: \"auto\",\r\n\t\t\t\t\t\tautoResize: true,\r\n\t\t\t\t\t\tstripe: true, //开启斑马纹\r\n\t\t\t\t\t\tshowOverflow: true,\r\n\t\t\t\t\t\tresizable: true,\r\n\t\t\t\t\t\thighlightHoverRow: true,\r\n\t\t\t\t\t\thighlightCurrentRow: true,\r\n\t\t\t\t\t\thighlightCurrentColumn: true, //允许高亮显示列\r\n\t\t\t\t\t\tcheckboxConfig: {\r\n\t\t\t\t\t\t\thighlight: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttooltipConfig: {\r\n\t\t\t\t\t\t\tenterable: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\teditConfig: {\r\n\t\t\t\t\t\t\ttrigger: \"click\",\r\n\t\t\t\t\t\t\tmode: \"cell\",\r\n\t\t\t\t\t\t\tshowUpdateStatus: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tkeepSource: true,\r\n\t\t\t\t\t\tdata: [],\r\n\t\t\t\t\t\tcolumns: []\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//更新数据\r\n\t\t\tupdateData(newValue, oldValue, ownerInstance, instance) {\r\n\t\t\t\tif (newValue.setType == \"init\") this.id_r = newValue.id\r\n\t\t\t\t//判断需要对组件做什么操作\r\n\t\t\t\t//修改数据绑定\r\n\t\t\t\tif (newValue.setType) {\r\n\t\t\t\t\tthis.setTableProps_r(newValue.props, newValue.setType, ownerInstance);\r\n\t\t\t\t}\r\n\t\t\t\t//调用方法\r\n\t\t\t\tif (newValue.methodsName) {\r\n\t\t\t\t\tthis.callMethods_r(newValue.methodsName, newValue.methodsParam, ownerInstance, newValue.key);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 修改组件属性\r\n\t\t\t * @param {Object} props 组件props参数\r\n\t\t\t * @param {String} setType 修改类型\r\n\t\t\t */\r\n\t\t\tsetTableProps_r(props, setType, ownerInstance) {\r\n\t\t\t\t//初始化\r\n\t\t\t\tif (setType == \"init\") {\r\n\t\t\t\t\tObject.assign(this.tableProps.tablePropsObj, props)\r\n\t\t\t\t\tthis.loadHtml(props.initSlotString, props.initEventsList);\r\n\t\t\t\t\tthis.loadScript(ownerInstance, props.staticBasePath ? props.staticBasePath : \"\");\r\n\t\t\t\t}\r\n\t\t\t\t//修改数据绑定\r\n\t\t\t\tif (setType == \"setProps\") {\r\n\t\t\t\t\tObject.assign(this.tableProps.tablePropsObj, props)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 调用组件方法\r\n\t\t\t * @param {String} methodsName 方法名称\r\n\t\t\t * @param {Object} methodsParam 方法参数\r\n\t\t\t * @param {String} key 本地调用方法的临时主键\r\n\t\t\t */\r\n\t\t\tcallMethods_r(methodsName, methodsParam, ownerInstance, key) {\r\n\t\t\t\tlet data = {\r\n\t\t\t\t\tmethodsName,\r\n\t\t\t\t\tkey,\r\n\t\t\t\t\tmethodsParam: undefined\r\n\t\t\t\t}\r\n\t\t\t\t//判断参数是否为多个\r\n\t\t\t\tif (methodsParam) {\r\n\t\t\t\t\tif (methodsParam._multiple) {\r\n\t\t\t\t\t\tdata.methodsParam = this.vm.$refs.table[methodsName](...methodsParam._multiple)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata.methodsParam = this.vm.$refs.table[methodsName](methodsParam)\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdata.methodsParam = this.vm.$refs.table[methodsName](methodsParam)\r\n\t\t\t\t}\r\n\t\t\t\t//因为必须要延时一下,否则使用下方注释代码则会出现返回上一次的数据,测试调用组件方法为:getTableData,暂时这样写,后续再进行处理\r\n\t\t\t\tlet isPromise = obj => {\r\n\t\t\t\t\treturn !!obj //有实际含义的变量才执行方法，变量null，undefined和''空串都为false\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t(typeof obj === 'object' || typeof obj === 'function') // 初始promise 或 promise.then返回的\r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\ttypeof obj.then === 'function';\r\n\t\t\t\t}\r\n\t\t\t\t//判断返回值是否是Promise\r\n\t\t\t\tif (isPromise(data.methodsParam)) {\r\n\t\t\t\t\tdata.methodsParam.then(res => {\r\n\t\t\t\t\t\t//过滤可以返回的值，无法被JSON.stringify的值将不进行返回\r\n\t\t\t\t\t\tif (typeof(res) == \"object\") {\r\n\t\t\t\t\t\t\tlet _obj = {}\r\n\t\t\t\t\t\t\tlet _arr = []\r\n\t\t\t\t\t\t\t//判断值是否允许返回\r\n\t\t\t\t\t\t\tlet JSONstringify = (obj) => {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tJSON.stringify(obj)\r\n\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tXEUtils.lastEach(res, (item, key) => {\r\n\t\t\t\t\t\t\t\tif (XEUtils.isPlainObject(res)) {\r\n\t\t\t\t\t\t\t\t\tif (JSONstringify(res[key])) {\r\n\t\t\t\t\t\t\t\t\t\t_obj[key] = res[key]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (XEUtils.isArray(res)) {\r\n\t\t\t\t\t\t\t\t\tif (JSONstringify(res[key])) {\r\n\t\t\t\t\t\t\t\t\t\t_arr.push(res[key])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif (XEUtils.isPlainObject(res)) {\r\n\t\t\t\t\t\t\t\tdata.methodsParam = _obj\r\n\t\t\t\t\t\t\t} else if (XEUtils.isArray(res)) {\r\n\t\t\t\t\t\t\t\tdata.methodsParam = _arr\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tdata.methodsParam = res\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\townerInstance.callMethod('callMethodsCallback', data)\r\n\t\t\t\t\t\t}, 1)\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\townerInstance.callMethod('callMethodsCallback', data)\r\n\t\t\t\t}, 1)\r\n\t\t\t\t// ownerInstance.callMethod('callMethodsCallback', {\r\n\t\t\t\t// \tmethodsName,\r\n\t\t\t\t// \tmethodsParam: vm.$refs.table[methodsName](methodsParam)\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 加载vxeTable标签\r\n\t\t\t * @param {Object} initSlotString 插槽的标签字符串\r\n\t\t\t * @param {Array} initEventsList 需要表格的回调函数\r\n\t\t\t */\r\n\t\t\tloadHtml(initSlotString, initEventsList) {\r\n\t\t\t\t//获取vxe-table要被渲染出来的dom节点，并向此节点内写入内容\r\n\t\t\t\tvar tableTemplate = document.getElementById(this.id_r);\r\n\t\t\t\t//初始化表格时的事件字符串\r\n\t\t\t\tlet initEventsString = \"\"\r\n\t\t\t\tif (initEventsList) {\r\n\t\t\t\t\tif (typeof(initEventsList[0]) == \"string\") {\r\n\t\t\t\t\t\t//向下兼容组件1.0写法\r\n\t\t\t\t\t\tinitEventsList.forEach(item => {\r\n\t\t\t\t\t\t\tinitEventsString +=\r\n\t\t\t\t\t\t\t\t` @${item}=\"tableEvents($event,null,'${item}')\"`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else if (typeof(initEventsList[0]) == \"object\") {\r\n\t\t\t\t\t\t//需要返回的参数字段名\r\n\t\t\t\t\t\tlet paramNameList = \"\"\r\n\t\t\t\t\t\t//向下兼容组件1.0写法\r\n\t\t\t\t\t\tinitEventsList.forEach(item => {\r\n\t\t\t\t\t\t\titem.paramNameList.forEach(paramName => {\r\n\t\t\t\t\t\t\t\tparamNameList += `'${paramName}',`\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tparamNameList = paramNameList.substring(0, paramNameList.length - 1)\r\n\t\t\t\t\t\t\tinitEventsString +=\r\n\t\t\t\t\t\t\t\t` @${item.name}=\"tableEvents($event,[${paramNameList}],'${item.name}')\"`\r\n\t\t\t\t\t\t\tparamNameList = \"\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ttableTemplate.innerHTML = `\r\n\t\t\t\t<style>\r\n\t\t\t\t\t.is--new {\r\n\t\t\t\t\t  background-color: #fefee9 !important;\r\n\t\t\t\t\t}\r\n\t\t\t\t</style>\r\n\t\t\t\t\t<div id=\"${this.id_r}Vue\" style=\"width: 100%;height: 100%;\">\r\n\t\t\t\t\t\t<template>\r\n\t\t\t\t\t\t\t<div style=\"width: 100%;height: 100%;\">\r\n\t\t\t\t\t\t\t\t<vxe-grid ref=\"table\" v-bind=\"tablePropsObj\" ${initEventsString}>\r\n\t\t\t\t\t\t\t\t\t${initSlotString?initSlotString:''}\r\n\t\t\t\t\t\t\t\t</vxe-grid>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t`;\r\n\t\t\t},\r\n\t\t\t//加载表格所需要的script文件，并渲染表格\r\n\t\t\t//staticBasePath 静态资源文件基础路径，特殊情况下需要写\r\n\t\t\tasync loadScript(ownerInstance, staticBasePath) {\r\n\t\t\t\t//加载vue.js\r\n\t\t\t\tif (document.getElementsByClassName('vueScript').length == 0) {\r\n\t\t\t\t\tawait new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tvar vueScript = document.createElement('script');\r\n\t\t\t\t\t\tvueScript.src = staticBasePath + 'static/c-table/js/vue-2.6.14.js';\r\n\t\t\t\t\t\tvueScript.className = 'vueScript';\r\n\t\t\t\t\t\tdocument.head.appendChild(vueScript);\r\n\t\t\t\t\t\tvueScript.onload = () => resolve()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t//加载xe-utils js\r\n\t\t\t\tif (document.getElementsByClassName('XEUtilsScript').length == 0) {\r\n\t\t\t\t\tawait new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tvar XEUtilsScript = document.createElement('script');\r\n\t\t\t\t\t\tXEUtilsScript.src = staticBasePath + 'static/c-table/js/xe-utils3.3.1.js';\r\n\t\t\t\t\t\tXEUtilsScript.className = 'XEUtilsScript';\r\n\t\t\t\t\t\tdocument.head.appendChild(XEUtilsScript);\r\n\t\t\t\t\t\tXEUtilsScript.onload = () => resolve()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t//加载vxeTable js\r\n\t\t\t\tif (document.getElementsByClassName('vxeTableScript').length == 0) {\r\n\t\t\t\t\tawait new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tvar vxeTableScript = document.createElement('script');\r\n\t\t\t\t\t\tvxeTableScript.src = staticBasePath + 'static/c-table/js/vxe-table3.3.11.js';\r\n\t\t\t\t\t\tvxeTableScript.className = 'vxeTableScript';\r\n\t\t\t\t\t\tdocument.head.appendChild(vxeTableScript);\r\n\t\t\t\t\t\tvxeTableScript.onload = () => resolve()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t//加载vxeTable css\r\n\t\t\t\tif (document.getElementsByClassName('vxeTableCss').length == 0) {\r\n\t\t\t\t\tawait new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tvar link = document.createElement('link');\r\n\t\t\t\t\t\tlink.rel = 'stylesheet';\r\n\t\t\t\t\t\tlink.type = 'text/css';\r\n\t\t\t\t\t\tlink.href = staticBasePath + 'static/c-table/css/vxe-table3.3.11.css';\r\n\t\t\t\t\t\tlink.className = 'vxeTableCss';\r\n\t\t\t\t\t\tdocument.head.appendChild(link);\r\n\t\t\t\t\t\tlink.onload = () => resolve()\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tlet _ownerInstance = ownerInstance;\r\n\t\t\t\tthis.vm = new Vue({\r\n\t\t\t\t\tdata: this.tableProps,\r\n\t\t\t\t\tmethods: {\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 表格的所有回调函数\r\n\t\t\t\t\t\t * @param {Object} param 回调函数的参数\r\n\t\t\t\t\t\t * @param {Array} paramNameList 需要返回的参数字段名(已废弃使用，但为兼容1.0写法，所以此参数占位)\r\n\t\t\t\t\t\t * @param {String} eventsName 回调函数的名称\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\ttableEvents(param, paramNameList, eventsName) {\r\n\t\t\t\t\t\t\tlet params = {};\r\n\t\t\t\t\t\t\tlet JSONstringify = (key) => {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\tJSON.stringify(param[key])\r\n\t\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//过滤可以返回的参数\r\n\t\t\t\t\t\t\tObject.keys(param).forEach(key => {\r\n\t\t\t\t\t\t\t\tif (JSONstringify(key)) {\r\n\t\t\t\t\t\t\t\t\tparams[key] = param[key]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t_ownerInstance.callMethod('tableEvents', {\r\n\t\t\t\t\t\t\t\tparam: params,\r\n\t\t\t\t\t\t\t\teventsName\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t//表格插槽回调事件\r\n\t\t\t\t\t\tslotEvents() {\r\n\t\t\t\t\t\t\t_ownerInstance.callMethod('slotEvents', arguments)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).$mount(\"#\" + this.id_r + \"Vue\")\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\n"],"sourceRoot":""}